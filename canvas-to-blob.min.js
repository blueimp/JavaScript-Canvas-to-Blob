(function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder||e.Blob,r=n&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(t){var r,i,s,o,u,a;t.split(",")[0].indexOf("base64")>=0?r=atob(t.split(",")[1]):r=decodeURIComponent(t.split(",")[1]),i=new ArrayBuffer(r.length),s=new Uint8Array(i);for(o=0;o<r.length;o+=1)s[o]=r.charCodeAt(o);a=t.split(",")[0].split(":")[1].split(";")[0];if(e.Blob&&!n.prototype.append)try{return new Blob([i],{type:a})}catch(f){}return u=new n,u.append(i),u.getBlob(a)};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,t){e(this.mozGetAsFile("blob",t))}:t.toDataURL&&r&&(t.toBlob=function(e,t){e(r(this.toDataURL(t)))})),typeof define!="undefined"&&define.amd?define(function(){return r}):e.dataURLtoBlob=r})(this);